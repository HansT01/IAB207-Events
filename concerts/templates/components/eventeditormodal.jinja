{% from "_formhelpers.jinja" import render_field %}
{% import "bootstrap/wtf.html" as wtf %}

<div class="modal fade" id="event-editor-{{index}}" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-400 tx-000">
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>

      <section class="modal-body p-3">
        <form action="" method="post" enctype="multipart/form-data">
          {{ eventform.csrf_token }}

          {% if event != none %}
          {{ render_field(eventform.event_id, type="hidden", value=event.id) }}
          {% else %}
          {{ render_field(eventform.event_id, type="hidden", value=none) }}
          {% endif %}

          <div class="row nopadding">
            <div class="mt-3">
              {{ render_field(eventform.title, type="text", class="form-control", value=event.title) }}
            </div>

            <div class="mt-3">
              {% if event != none %}
              {{ render_field(eventform.image, type="file", class="form-control", required=false) }}
              {% else %}
              {{ render_field(eventform.image, type="file", class="form-control") }}
              {% endif %}
            </div>

            <div class="mt-3">
              {{ render_field(eventform.artist, type="text", class="form-control", value=event.artist) }}
            </div>

            <div class="mt-3 col-sm-6">
              {{ render_field(eventform.genre, type="text", class="form-control", value=event.genre) }}
            </div>

            <div class="mt-3 col-sm-6">
              {{ eventform.status.label }}
              <select class="form-control" id="status" name="status" type="text">
                <option value="">Select a status</option>
                {% for option in eventform.status.choices %}
                {% if option == event.status %}
                <option value="{{option}}" selected>{{option.upper()}}</option>
                {% else %}
                <option value="{{option}}">{{option.upper()}}</option>
                {% endif %}
                {% endfor %}
              </select>
            </div>

            <div class="mt-3 col-sm-6">
              {{ render_field(eventform.venue, type="text", class="form-control", value=event.venue) }}
            </div>

            <div class="mt-3 col-sm-6">
              {{ render_field(eventform.timestamp, type="datetime-local", class="form-control", value=event.timestampformatted) }}
            </div>

            <div class="mt-3 col-sm-6">
              {{ render_field(eventform.tickets, type="number", class="form-control", value=event.tickets) }}
            </div>

            <div class="mt-3 col-sm-6">
              {{ render_field(eventform.price, type="number", class="form-control", value=event.price) }}
            </div>
          </div>

          <div class="row nopadding mb-3">
            <div class="mt-3">
              {{ eventform.desc.label }}
              <textarea class="form-control" id="desc" name="desc">{{ event.desc }}</textarea>
            </div>
          </div>

          <div class="row d-flex justify-content-center">
            {{ render_field(eventform.submit, type="submit", class="btn bg-200 tx-000 login-button") }}
          </div>
        </form>
      </section>
    </div>
  </div>
</div>